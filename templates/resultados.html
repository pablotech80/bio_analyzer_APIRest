{% extends 'base.html' %}
{% block title %}Resultados del An√°lisis Corporal{% endblock %}

{% block content %}
<div class="text-center mb-4">
    <img src="{{ url_for('static', filename='img/bio_analyze.jpg') }}" alt="BioAnalyze Logo" width="160" class="rounded-circle mb-3">
    <h1 class="mt-2">Resultado del An√°lisis e interpretaciones</h1>
    <p class="lead text-center">
        Tus m√©tricas han sido analizadas con precisi√≥n para ofrecerte una visi√≥n clara de tu estado f√≠sico actual.<br>
        Usa esta informaci√≥n como base para optimizar tu progreso y alcanzar tus objetivos.
    </p>
</div>

<div class="row g-4">

  <!-- üî• Metabolismo -->
  <div class="col-12">
    <h6 class="form-section-title border-bottom pb-1">üî• Metabolismo</h6>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="card-title mb-1">
          TMB: {{ resultados.tmb }} kcal
          <span data-bs-toggle="tooltip" title="Tasa Metab√≥lica Basal. Calor√≠as que tu cuerpo gasta en reposo.">
            <i class="bi bi-info-circle text-azul-logo"></i>
          </span>
        </h6>
        <p class="text-muted small">Valor saludable depende de edad, sexo y masa muscular.</p>
        {% if interpretaciones.tmb %}
        <p class="text-azul-logo small">{{ interpretaciones.tmb }}</p>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="card-title mb-1">
          Calor√≠as Diarias: {{ resultados.calorias_diarias }} kcal
          <span data-bs-toggle="tooltip" title="Estimaci√≥n de calor√≠as para mantener tu peso actual.">
            <i class="bi bi-info-circle text-azul-logo"></i>
          </span>
        </h6>
      </div>
    </div>
  </div>

  <!-- üß† Indicadores -->
  <div class="col-12">
    <h6 class="form-section-title border-bottom pb-1">üß† Indicadores de salud</h6>
  </div>

  {% for key, value in resultados.items() %}
    {% if key in ['imc', 'porcentaje_grasa', 'rcc', 'ratio_cintura_altura', 'ffmi'] %}
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h6 class="card-title mb-1">
            {{ key | replace('_', ' ') | upper }}: {{ value }}
            <span data-bs-toggle="tooltip" title="{% if key == 'imc' %}√çndice de Masa Corporal. Eval√∫a la relaci√≥n peso-altura.
            {% elif key == 'porcentaje_grasa' %}Porcentaje estimado de grasa corporal.
            {% elif key == 'ffmi' %}√çndice de Masa Libre de Grasa. Eval√∫a la masa muscular real.
            {% elif key == 'rcc' %}Relaci√≥n Cintura/Cadera. Valores altos indican riesgo cardiometab√≥lico.
            {% elif key == 'ratio_cintura_altura' %}Relaci√≥n cintura-altura. Ideal: menor a 0.5.{% endif %}">
              <i class="bi bi-info-circle text-azul-logo"></i>
            </span>
          </h6>
          {% if interpretaciones[key] %}
          <p class="text-azul-logo small">{{ interpretaciones[key] }}</p>
          {% endif %}
        </div>
      </div>
    </div>
    {% endif %}
  {% endfor %}

  <!-- üí™ Composici√≥n corporal -->
  <div class="col-12">
    <h6 class="form-section-title border-bottom pb-1">üí™ Composici√≥n Corporal</h6>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="card-title mb-1">Masa Muscular: {{ resultados.masa_muscular }} kg</h6>
        <p class="text-muted small">Estimaci√≥n basada en composici√≥n corporal.</p>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="card-title mb-1">Agua Total: {{ resultados.agua_total }} L</h6>
        <p class="text-muted small">Valores normales: 45‚Äì60% del peso corporal.</p>
      </div>
    </div>
  </div>

  <!-- üéØ Peso saludable -->
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="card-title mb-1">Peso Saludable Estimado</h6>
        <p class="text-muted small">Entre {{ resultados.peso_saludable.min }} kg y {{ resultados.peso_saludable.max }} kg</p>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="card-title mb-1">Sobrepeso: {{ resultados.sobrepeso }} kg</h6>
      </div>
    </div>
  </div>

  <!-- üçΩÔ∏è Macronutrientes -->
  <div class="col-12">
    <h6 class="form-section-title border-bottom pb-1">üçΩÔ∏è Macronutrientes diarios</h6>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <p class="text-muted small mb-1">Prote√≠nas: {{ resultados.macronutrientes.proteinas }} g</p>
        <p class="text-muted small mb-1">Carbohidratos: {{ resultados.macronutrientes.carbohidratos }} g</p>
        <p class="text-muted small mb-0">Grasas: {{ resultados.macronutrientes.grasas }} g</p>
      </div>
    </div>
  </div>
</div>

<div class="text-center mt-4">
  <a href="/informe_web" class="btn btn-outline-primary px-4">‚Üê Volver al formulario</a>
</div>
{% endblock %}