{% extends 'base.html' %}
{% block title %}Resultados del An√°lisis Corporal{% endblock %}

{% block content %}
<div class="text-center mb-4">
    <img src="{{ url_for('static', filename='img/bio_analyze.jpg') }}" alt="BioAnalyze Logo" width="160" class="rounded-circle mb-3">
    <h1 class="mt-2">Resultado del An√°lisis e Interpretaciones</h1>
    <p class="lead text-center">
        Tus m√©tricas han sido analizadas con precisi√≥n para ofrecerte una visi√≥n clara de tu estado f√≠sico actual.<br>
        Usa esta informaci√≥n como base para optimizar tu progreso y alcanzar tus objetivos.
    </p>
</div>


<div class="row g-4">
  <!-- Card: Datos personales -->
  <div class="col-12 col-md-6 col-lg-4">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-header bg-light">
        <h6 class="mb-0">üìã Datos personales</h6>
      </div>
      <div class="card-body">
        <p class="mb-1"><strong>Edad:</strong> {{ resultados.edad or form_data.get('edad', '‚Äî') }}</p>
        <p class="mb-1"><strong>G√©nero:</strong> {{ resultados.genero|capitalize or form_data.get('genero', '‚Äî')|capitalize }}</p>
        <p class="mb-1"><strong>Actividad f√≠sica:</strong> {{ resultados.nivel_actividad or form_data.get('factor_actividad', '‚Äî') }}</p>
      </div>
    </div>
  </div>

  <!-- Card: Medidas corporales -->
  <div class="col-12 col-md-6 col-lg-4">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-header bg-light">
        <h6 class="mb-0">üìè Medidas corporales</h6>
      </div>
      <div class="card-body">
        <p class="mb-1"><strong>Peso:</strong> {{ resultados.peso or form_data.get('peso', '‚Äî') }} kg</p>
        <p class="mb-1"><strong>Altura:</strong> {{ resultados.altura or form_data.get('altura', '‚Äî') }} cm</p>
        <p class="mb-1"><strong>Cuello:</strong> {{ resultados.cuello or form_data.get('cuello', '‚Äî') }} cm</p>
        <p class="mb-1"><strong>Cintura:</strong> {{ resultados.cintura or form_data.get('cintura', '‚Äî') }} cm</p>
        <p class="mb-1"><strong>Cadera:</strong> {{ resultados.cadera or form_data.get('cadera', '‚Äî') }} cm</p>
      </div>
    </div>
  </div>

  <!-- Card: Objetivo y macros -->
  <div class="col-12 col-lg-4">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-header bg-light">
        <h6 class="mb-0">üéØ Objetivo y macronutrientes</h6>
      </div>
      <div class="card-body">
        <p class="mb-1"><strong>Objetivo:</strong> {{ resultados.objetivo|capitalize or form_data.get('objetivo', '‚Äî')|capitalize }}</p>
        {% if resultados.macronutrientes and resultados.macronutrientes.proteinas %}
          <p class="mb-1"><strong>Prote√≠nas:</strong> {{ resultados.macronutrientes.proteinas }} g</p>
          <p class="mb-1"><strong>Carbohidratos:</strong> {{ resultados.macronutrientes.carbohidratos }} g</p>
          <p class="mb-1"><strong>Grasas:</strong> {{ resultados.macronutrientes.grasas }} g</p>
        {% else %}
          <p class="text-muted small mb-0">No se calcularon macronutrientes porque no seleccionaste objetivo.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Resto de cards: Metabolismo, indicadores, composici√≥n corporal, etc. -->
<div class="row g-4 mt-2">
  <!-- üî• Metabolismo -->
  <div class="col-12">
    <h6 class="form-section-title border-bottom pb-1">üî• Metabolismo</h6>
  </div>
  <div class="col-12 col-md-6">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-body">
        <h6 class="card-title mb-1">
          TMB: {{ resultados.tmb }} kcal
          <span data-bs-toggle="tooltip" title="Tasa Metab√≥lica Basal. Calor√≠as que tu cuerpo gasta en reposo.">
            <i class="bi bi-info-circle text-azul-logo"></i>
          </span>
        </h6>
        <p class="text-muted small">Valor saludable depende de edad, sexo y masa muscular.</p>
        {% if interpretaciones.tmb %}
        <p class="text-azul-logo small">{{ interpretaciones.tmb }}</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="col-12 col-md-6">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-body">
        <h6 class="card-title mb-1">
          TDEE (Gasto Energ√©tico Diario Estimado): {{ resultados.tdee }} kcal
          <span data-bs-toggle="tooltip" title="Tu gasto cal√≥rico diario estimado considerando tu nivel de actividad f√≠sica general.">
            <i class="bi bi-info-circle text-azul-logo"></i>
          </span>
        </h6>
        <p class="text-muted small">Basado en tu TMB multiplicado por tu nivel de actividad f√≠sica.</p>
      </div>
    </div>
  </div>
  <div class="col-12 col-md-6">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-body">
        <h6 class="card-title mb-1">
          Edad Metab√≥lica: {{ resultados.edad_metabolica }} a√±os
          <span data-bs-toggle="tooltip" title="Edad metab√≥lica ajustada considerando tu metabolismo basal y composici√≥n corporal (IMC, porcentaje de grasa y obesidad abdominal). Una edad metab√≥lica m√°s elevada puede indicar riesgo metab√≥lico, incluso si tu metabolismo basal es adecuado.">
            <i class="bi bi-info-circle text-azul-logo"></i>
          </span>
        </h6>
        <p class="text-muted small">Un metabolismo m√°s joven indica buena condici√≥n f√≠sica y salud metab√≥lica.</p>
        {% if interpretaciones.edad_metabolica %}
        <p class="text-azul-logo small">{{ interpretaciones.edad_metabolica }}</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="col-12 col-md-6">
    <div class="card shadow-sm rounded-4 h-100">
      <div class="card-body">
        <h6 class="card-title mb-1">
          Calor√≠as Diarias: {{ resultados.calorias_diarias }} kcal
          <span data-bs-toggle="tooltip" title="Estimaci√≥n de calor√≠as para mantener tu peso actual.">
            <i class="bi bi-info-circle text-azul-logo"></i>
          </span>
        </h6>
      </div>
    </div>
  </div>
</div>

<!-- Indicadores, composici√≥n corporal, etc. se mantienen igual debajo -->

<div class="text-center mt-4">
  <a href="/informe_web" class="btn btn-outline-primary px-4 rounded-pill">‚Üê Volver al formulario</a>
</div>

{% endblock %}
