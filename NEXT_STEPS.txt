================================================================================
COACHBODYFIT360 - MIGRACIÃ“N FLASK â†’ DJANGO + AZURE
PRÃ“XIMOS PASOS AL RETOMAR EL PROYECTO
================================================================================

ğŸ“ ESTADO ACTUAL (12 Enero 2026, 02:05 AM)
================================================================================

âœ… FASE 1 COMPLETADA: Backend Django Core
- Estructura modular con 6 apps Django creadas
- Modelos de datos multi-tenant implementados
- Sistema de permisos granular (32 permisos, 5 roles)
- Django Admin configurado y funcional
- Migraciones ejecutadas exitosamente
- Base de datos poblada con datos iniciales
- Servidor Django funcionando en puerto 8000

ğŸ“‚ UBICACIÃ“N DEL PROYECTO DJANGO:
/Users/macbookpro/bio_analyzer_APIRest/django_backend/

ğŸ” CREDENCIALES SUPERADMIN:
Email: admin@coachbodyfit360.com
Password: Admin123!

================================================================================
ğŸš€ FASE 2: API REST CON DJANGO REST FRAMEWORK
================================================================================

OBJETIVO: Crear API REST completa con DRF para consumo desde frontend

TAREAS PENDIENTES:
--------------------------------------------------------------------------------

1. CREAR SERIALIZERS (apps/*/serializers.py)
   â–¡ UserSerializer (registro, perfil, actualizaciÃ³n)
   â–¡ OrganizationSerializer (CRUD organizaciones)
   â–¡ MembershipSerializer (gestiÃ³n de miembros)
   â–¡ RoleSerializer (solo lectura)
   â–¡ PermissionSerializer (solo lectura)
   â–¡ BiometricAnalysisSerializer (CRUD anÃ¡lisis)
   â–¡ NutritionPlanSerializer (CRUD planes)
   â–¡ TrainingPlanSerializer (CRUD planes)

2. CREAR VIEWSETS (apps/*/views.py)
   â–¡ UserViewSet (me/, list, retrieve, update)
   â–¡ OrganizationViewSet (CRUD + members)
   â–¡ BiometricAnalysisViewSet (CRUD + filtros)
   â–¡ NutritionPlanViewSet (CRUD)
   â–¡ TrainingPlanViewSet (CRUD)

3. CONFIGURAR URLS (apps/*/urls.py + core/urls.py)
   â–¡ Crear urls.py en cada app
   â–¡ Registrar routers de DRF
   â–¡ Incluir en core/urls.py bajo /api/v1/

4. AUTENTICACIÃ“N JWT
   â–¡ Endpoints: login, logout, refresh, register
   â–¡ VerificaciÃ³n de email
   â–¡ RecuperaciÃ³n de contraseÃ±a

5. PERMISOS PERSONALIZADOS
   â–¡ IsOwnerOrAdmin
   â–¡ HasOrganizationPermission
   â–¡ HasModulePermission (bioanalyze, nutrition, training)

6. TESTS
   â–¡ Tests de modelos
   â–¡ Tests de serializers
   â–¡ Tests de endpoints (CRUD)
   â–¡ Tests de permisos
   â–¡ Tests de autenticaciÃ³n

7. DOCUMENTACIÃ“N API
   â–¡ Configurar drf-spectacular
   â–¡ Agregar docstrings a ViewSets
   â–¡ Probar Swagger UI en /api/docs/

================================================================================
ğŸ“‹ COMANDOS ÃšTILES AL RETOMAR
================================================================================

# 1. ACTIVAR ENTORNO Y NAVEGAR AL PROYECTO
cd /Users/macbookpro/bio_analyzer_APIRest/django_backend

# 2. VERIFICAR ESTADO DE MIGRACIONES
python manage.py showmigrations

# 3. EJECUTAR SERVIDOR DJANGO
python manage.py runserver 8000

# 4. ACCEDER AL ADMIN
# http://localhost:8000/admin/
# Login: admin@coachbodyfit360.com / Admin123!

# 5. CREAR NUEVA APP (si es necesario)
python manage.py startapp nombre_app apps/nombre_app

# 6. CREAR MIGRACIONES (despuÃ©s de cambios en modelos)
python manage.py makemigrations
python manage.py migrate

# 7. EJECUTAR TESTS
python manage.py test

# 8. SHELL INTERACTIVO
python manage.py shell

# 9. CREAR SUPERUSUARIO ADICIONAL
python manage.py createsuperuser

================================================================================
ğŸ“ ESTRUCTURA DE ARCHIVOS A CREAR EN FASE 2
================================================================================

apps/
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ serializers.py          â† CREAR
â”‚   â”œâ”€â”€ views.py                â† CREAR
â”‚   â”œâ”€â”€ urls.py                 â† CREAR
â”‚   â””â”€â”€ permissions.py          â† CREAR
â”œâ”€â”€ organizations/
â”‚   â”œâ”€â”€ serializers.py          â† CREAR
â”‚   â”œâ”€â”€ views.py                â† CREAR
â”‚   â”œâ”€â”€ urls.py                 â† CREAR
â”‚   â””â”€â”€ permissions.py          â† CREAR
â”œâ”€â”€ bioanalyze/
â”‚   â”œâ”€â”€ serializers.py          â† CREAR
â”‚   â”œâ”€â”€ views.py                â† CREAR
â”‚   â”œâ”€â”€ urls.py                 â† CREAR
â”‚   â””â”€â”€ permissions.py          â† CREAR
â”œâ”€â”€ nutrition/
â”‚   â”œâ”€â”€ serializers.py          â† CREAR
â”‚   â”œâ”€â”€ views.py                â† CREAR
â”‚   â””â”€â”€ urls.py                 â† CREAR
â””â”€â”€ training/
    â”œâ”€â”€ serializers.py          â† CREAR
    â”œâ”€â”€ views.py                â† CREAR
    â””â”€â”€ urls.py                 â† CREAR

core/
â””â”€â”€ urls.py                     â† ACTUALIZAR (incluir API routes)

================================================================================
ğŸ”§ EJEMPLO: CREAR PRIMER ENDPOINT (UserViewSet)
================================================================================

1. Crear apps/users/serializers.py:
```python
from rest_framework import serializers
from .models import User

class UserSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = ['id', 'username', 'email', 'first_name', 'last_name', 
                  'phone', 'date_of_birth', 'gender', 'avatar', 'bio']
        read_only_fields = ['id']
```

2. Crear apps/users/views.py:
```python
from rest_framework import viewsets
from rest_framework.permissions import IsAuthenticated
from .models import User
from .serializers import UserSerializer

class UserViewSet(viewsets.ModelViewSet):
    queryset = User.objects.all()
    serializer_class = UserSerializer
    permission_classes = [IsAuthenticated]
```

3. Crear apps/users/urls.py:
```python
from rest_framework.routers import DefaultRouter
from .views import UserViewSet

router = DefaultRouter()
router.register(r'users', UserViewSet)

urlpatterns = router.urls
```

4. Actualizar core/urls.py:
```python
urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/v1/', include('apps.users.urls')),  # â† AGREGAR
]
```

5. Probar endpoint:
GET http://localhost:8000/api/v1/users/

================================================================================
ğŸ“š RECURSOS Y DOCUMENTACIÃ“N
================================================================================

Django REST Framework:
https://www.django-rest-framework.org/

Django REST Framework JWT:
https://django-rest-framework-simplejwt.readthedocs.io/

drf-spectacular (OpenAPI):
https://drf-spectacular.readthedocs.io/

Django Documentation:
https://docs.djangoproject.com/en/5.0/

================================================================================
ğŸ¯ OBJETIVOS DE FASE 2
================================================================================

AL FINALIZAR FASE 2, DEBERÃAS TENER:

âœ“ API REST completa con todos los endpoints CRUD
âœ“ AutenticaciÃ³n JWT funcionando
âœ“ Sistema de permisos implementado
âœ“ DocumentaciÃ³n Swagger/OpenAPI generada
âœ“ Tests de integraciÃ³n pasando
âœ“ API lista para consumo desde frontend

TIEMPO ESTIMADO: 2-3 semanas

================================================================================
ğŸš¢ FASE 3: DEPLOY A AZURE (DespuÃ©s de Fase 2)
================================================================================

TAREAS PRINCIPALES:
- Crear Dockerfile y docker-compose.yml
- Configurar Terraform para infraestructura Azure
- Setup CI/CD con GitHub Actions
- Integrar Azure OpenAI Service
- Configurar Azure Blob Storage
- Deploy a Azure Container Apps

================================================================================
ğŸ“ NOTAS IMPORTANTES
================================================================================

1. El proyecto Flask SIGUE FUNCIONANDO en Railway
   - No tocar /app/ (Flask actual)
   - Todo el trabajo Django estÃ¡ en /django_backend/

2. Base de datos SQLite en desarrollo
   - Archivo: django_backend/db.sqlite3
   - En producciÃ³n se usarÃ¡ PostgreSQL en Azure

3. Variables de entorno
   - Archivo: django_backend/.env (no estÃ¡ en Git)
   - Ejemplo: django_backend/.env.example

4. Migraciones
   - Siempre ejecutar makemigrations antes de migrate
   - Revisar las migraciones generadas antes de aplicarlas

5. Admin Panel
   - Usar para verificar datos y probar funcionalidades
   - Cambiar contraseÃ±a de SuperAdmin en producciÃ³n

================================================================================
âœ… CHECKLIST ANTES DE EMPEZAR FASE 2
================================================================================

â–¡ Servidor Django corriendo (python manage.py runserver 8000)
â–¡ Acceso al admin panel verificado
â–¡ Base de datos con datos iniciales poblada
â–¡ DocumentaciÃ³n README.md leÃ­da
â–¡ Entorno de desarrollo configurado

================================================================================
ğŸ‰ Â¡LISTO PARA CONTINUAR!
================================================================================

Cuando retomes el proyecto:
1. Lee este archivo completo
2. Ejecuta los comandos de verificaciÃ³n
3. Comienza con la creaciÃ³n de serializers
4. Sigue el ejemplo de UserViewSet
5. Prueba cada endpoint antes de continuar

Â¡Ã‰xito con la Fase 2!

Pablo Techera
CoachBodyFit360 Team
